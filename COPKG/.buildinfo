#product-info  {
	product-name: "libffi";
	version: "3.0.10";
	original-source-location: "ftp://sourceware.org/pub/libffi/libffi-3.0.10.tar.gz";
	original-source-website: "http://sourceware.org/libffi/";
	license: "Expat License";
	packager: "Vincent Povirk <madewokherd@gmail.com>";
}

x86 {
	compiler: vc10;
    platform: x86;
    
    default: false; // This configuration is broken, as the resulting dll has no exports.
	
    targets: {
		"COPKG\libffi\Release\libffi.dll",
		"COPKG\libffi\Release\libffi.lib",
	};
	
    build-command:@"
       msbuild /p:Platform=Win32 /p:Configuration=Release COPKG\libffi\libffi.sln
	";
    
    clean-command:@"
	   rd /s /q COPKG\libffi\libffi\Release
	   rd /s /q COPKG\libffi\Release
    ";
};

mingw {
    compiler: mingw;
    platform: x86;
    
    targets: {
        "i686-pc-mingw32\.libs\libffi.dll.a",
        "i686-pc-mingw32\.libs\libffi-5.dll",
    };
    
    build-command:@"
       sh configure
       make
    ";
    
    clean-command:@"
        if exist Makefile make distclean
        erase makefile.sed~ > nul 2> nul
    ";
};

release {
	uses: x86;
};
